{"version":3,"file":"disqus.min.js","sources":["../../src/plugins/disqus.js"],"sourcesContent":["const fixedPath = location.href.replace('/-/', '/#/');\nif (fixedPath !== location.href) {\n  location.href = fixedPath;\n}\n\nfunction install(hook, vm) {\n  const dom = Docsify.dom;\n  const disqus = vm.config.disqus;\n  if (!disqus) {\n    throw Error('$docsify.disqus is required');\n  }\n\n  hook.init(_ => {\n    const script = dom.create('script');\n\n    script.async = true;\n    script.src = `https://${disqus}.disqus.com/embed.js`;\n    script.setAttribute('data-timestamp', Number(new Date()));\n    dom.appendTo(dom.body, script);\n  });\n\n  hook.mounted(_ => {\n    const div = dom.create('div');\n    div.id = 'disqus_thread';\n    const main = dom.getNode('#main');\n    div.style = `width: ${main.clientWidth}px; margin: 0 auto 20px;`;\n    dom.appendTo(dom.find('.content'), div);\n\n    window.disqus_config = function () {\n      this.page.url = location.origin + '/-' + vm.route.path;\n      this.page.identifier = vm.route.path;\n      this.page.title = document.title;\n    };\n  });\n\n  hook.doneEach(_ => {\n    if (typeof window.DISQUS !== 'undefined') {\n      window.DISQUS.reset({\n        reload: true,\n        config() {\n          this.page.url = location.origin + '/-' + vm.route.path;\n          this.page.identifier = vm.route.path;\n          this.page.title = document.title;\n        },\n      });\n    }\n  });\n}\n\nwindow.$docsify = window.$docsify || {};\n$docsify.plugins = [install, ...($docsify.plugins || [])];\n"],"names":["fixedPath","location","href","replace","window","$docsify","plugins","hook","vm","dom","Docsify","disqus","config","Error","init","_","script","create","async","src","setAttribute","Number","Date","appendTo","body","mounted","div","id","main","getNode","style","clientWidth","find","disqus_config","this","page","url","origin","route","path","identifier","title","document","doneEach","DISQUS","reset","reload"],"mappings":";;;;;;yBAAA,MAAMA,EAAYC,SAASC,KAAKC,QAAQ,MAAO,OAC3CH,IAAcC,SAASC,OACzBD,SAASC,KAAOF,GA+ClBI,OAAOC,SAAWD,OAAOC,UAAY,GACrCA,SAASC,QAAU,CA7CnB,SAAiBC,EAAMC,GACrB,MAAMC,EAAMC,QAAQD,IACdE,EAASH,EAAGI,OAAOD,OACzB,IAAKA,EACH,MAAME,MAAM,+BAGdN,EAAKO,MAAKC,IACR,MAAMC,EAASP,EAAIQ,OAAO,UAE1BD,EAAOE,OAAQ,EACfF,EAAOG,IAAO,WAAUR,wBACxBK,EAAOI,aAAa,iBAAkBC,OAAO,IAAIC,OACjDb,EAAIc,SAASd,EAAIe,KAAMR,EAAO,IAGhCT,EAAKkB,SAAQV,IACX,MAAMW,EAAMjB,EAAIQ,OAAO,OACvBS,EAAIC,GAAK,gBACT,MAAMC,EAAOnB,EAAIoB,QAAQ,SACzBH,EAAII,MAAS,UAASF,EAAKG,sCAC3BtB,EAAIc,SAASd,EAAIuB,KAAK,YAAaN,GAEnCtB,OAAO6B,cAAgB,WACrBC,KAAKC,KAAKC,IAAMnC,SAASoC,OAAS,KAAO7B,EAAG8B,MAAMC,KAClDL,KAAKC,KAAKK,WAAahC,EAAG8B,MAAMC,KAChCL,KAAKC,KAAKM,MAAQC,SAASD,MAC5B,IAGHlC,EAAKoC,UAAS5B,SACiB,IAAlBX,OAAOwC,QAChBxC,OAAOwC,OAAOC,MAAM,CAClBC,QAAQ,EACRlC,MAAAA,GACEsB,KAAKC,KAAKC,IAAMnC,SAASoC,OAAS,KAAO7B,EAAG8B,MAAMC,KAClDL,KAAKC,KAAKK,WAAahC,EAAG8B,MAAMC,KAChCL,KAAKC,KAAKM,MAAQC,SAASD,KAC7B,GAEJ,GAEJ,KAGiCpC,SAASC,SAAW"}