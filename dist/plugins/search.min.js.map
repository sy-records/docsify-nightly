{"version":3,"file":"search.min.js","sources":["../../src/core/render/utils.js","../../src/plugins/search/search.js","../../src/plugins/search/component.js","../../src/plugins/search/index.js"],"sourcesContent":["/**\n * Converts a colon formatted string to a object with properties.\n *\n * This is process a provided string and look for any tokens in the format\n * of `:name[=value]` and then convert it to a object and return.\n * An example of this is ':include :type=code :fragment=demo' is taken and\n * then converted to:\n *\n * ```\n * {\n *  include: '',\n *  type: 'code',\n *  fragment: 'demo'\n * }\n * ```\n *\n * @param {string}   str   The string to parse.\n *\n * @return {{str: string, config: object}} The original string formatted, and parsed object, { str, config }.\n */\nexport function getAndRemoveConfig(str = '') {\n  const config = {};\n\n  if (str) {\n    str = str\n      .replace(/^('|\")/, '')\n      .replace(/('|\")$/, '')\n      .replace(/(?:^|\\s):([\\w-]+:?)=?([\\w-%]+)?/g, (m, key, value) => {\n        if (key.indexOf(':') === -1) {\n          config[key] = (value && value.replace(/&quot;/g, '')) || true;\n          return '';\n        }\n\n        return m;\n      })\n      .trim();\n  }\n\n  return { str, config };\n}\n\n/**\n * Remove the <a> tag from sidebar when the header with link, details see issue 1069\n * @param {string}   str   The string to deal with.\n *\n * @return {string}   The string after delete the <a> element.\n */\nexport function removeAtag(str = '') {\n  return str.replace(/(<\\/?a.*?>)/gi, '');\n}\n\n/**\n * Remove the docsifyIgnore configs and return the str\n * @param {string}   content   The string to deal with.\n *\n * @return {{content: string, ignoreAllSubs: boolean, ignoreSubHeading: boolean}} The string after delete the docsifyIgnore configs, and whether to ignore some or all.\n */\nexport function getAndRemoveDocisfyIgnoreConfig(content = '') {\n  let ignoreAllSubs, ignoreSubHeading;\n  if (/<!-- {docsify-ignore} -->/g.test(content)) {\n    content = content.replace('<!-- {docsify-ignore} -->', '');\n    ignoreSubHeading = true;\n  }\n\n  if (/{docsify-ignore}/g.test(content)) {\n    content = content.replace('{docsify-ignore}', '');\n    ignoreSubHeading = true;\n  }\n\n  if (/<!-- {docsify-ignore-all} -->/g.test(content)) {\n    content = content.replace('<!-- {docsify-ignore-all} -->', '');\n    ignoreAllSubs = true;\n  }\n\n  if (/{docsify-ignore-all}/g.test(content)) {\n    content = content.replace('{docsify-ignore-all}', '');\n    ignoreAllSubs = true;\n  }\n\n  return { content, ignoreAllSubs, ignoreSubHeading };\n}\n","/* eslint-disable no-unused-vars */\nimport {\n  getAndRemoveConfig,\n  getAndRemoveDocisfyIgnoreConfig,\n} from '../../core/render/utils.js';\n\nlet INDEXS = {};\n\nconst LOCAL_STORAGE = {\n  EXPIRE_KEY: 'docsify.search.expires',\n  INDEX_KEY: 'docsify.search.index',\n};\n\nfunction resolveExpireKey(namespace) {\n  return namespace\n    ? `${LOCAL_STORAGE.EXPIRE_KEY}/${namespace}`\n    : LOCAL_STORAGE.EXPIRE_KEY;\n}\n\nfunction resolveIndexKey(namespace) {\n  return namespace\n    ? `${LOCAL_STORAGE.INDEX_KEY}/${namespace}`\n    : LOCAL_STORAGE.INDEX_KEY;\n}\n\nfunction escapeHtml(string) {\n  const entityMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n  };\n\n  return String(string).replace(/[&<>\"']/g, s => entityMap[s]);\n}\n\nfunction getAllPaths(router) {\n  const paths = [];\n\n  Docsify.dom\n    .findAll('.sidebar-nav a:not(.section-link):not([data-nosearch])')\n    .forEach(node => {\n      const href = node.href;\n      const originHref = node.getAttribute('href');\n      const path = router.parse(href).path;\n\n      if (\n        path &&\n        paths.indexOf(path) === -1 &&\n        !Docsify.util.isAbsolutePath(originHref)\n      ) {\n        paths.push(path);\n      }\n    });\n\n  return paths;\n}\n\nfunction getTableData(token) {\n  if (!token.text && token.type === 'table') {\n    token.rows.unshift(token.header);\n    token.text = token.rows\n      .map(columns => columns.map(r => r.text).join(' | '))\n      .join(' |\\n ');\n  }\n  return token.text;\n}\n\nfunction getListData(token) {\n  if (!token.text && token.type === 'list') {\n    token.text = token.raw;\n  }\n  return token.text;\n}\n\nfunction saveData(maxAge, expireKey, indexKey) {\n  localStorage.setItem(expireKey, Date.now() + maxAge);\n  localStorage.setItem(indexKey, JSON.stringify(INDEXS));\n}\n\nexport function genIndex(path, content = '', router, depth) {\n  const tokens = window.marked.lexer(content);\n  const slugify = window.Docsify.slugify;\n  const index = {};\n  let slug;\n  let title = '';\n\n  tokens.forEach((token, tokenIndex) => {\n    if (token.type === 'heading' && token.depth <= depth) {\n      const { str, config } = getAndRemoveConfig(token.text);\n\n      const text = getAndRemoveDocisfyIgnoreConfig(token.text).content;\n\n      if (config.id) {\n        slug = router.toURL(path, { id: slugify(config.id) });\n      } else {\n        slug = router.toURL(path, { id: slugify(escapeHtml(text)) });\n      }\n\n      if (str) {\n        title = getAndRemoveDocisfyIgnoreConfig(str).content;\n      }\n\n      index[slug] = { slug, title: title, body: '' };\n    } else {\n      if (tokenIndex === 0) {\n        slug = router.toURL(path);\n        index[slug] = {\n          slug,\n          title: path !== '/' ? path.slice(1) : 'Home Page',\n          body: token.text || '',\n        };\n      }\n\n      if (!slug) {\n        return;\n      }\n\n      if (!index[slug]) {\n        index[slug] = { slug, title: '', body: '' };\n      } else if (index[slug].body) {\n        token.text = getTableData(token);\n        token.text = getListData(token);\n\n        index[slug].body += '\\n' + (token.text || '');\n      } else {\n        token.text = getTableData(token);\n        token.text = getListData(token);\n\n        index[slug].body = token.text || '';\n      }\n    }\n  });\n  slugify.clear();\n  return index;\n}\n\nexport function ignoreDiacriticalMarks(keyword) {\n  if (keyword && keyword.normalize) {\n    return keyword.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n  }\n  return keyword;\n}\n\n/**\n * @param {String} query Search query\n * @returns {Array} Array of results\n */\nexport function search(query) {\n  const matchingResults = [];\n  let data = [];\n  Object.keys(INDEXS).forEach(key => {\n    data = [\n      ...data,\n      ...Object.keys(INDEXS[key]).map(page => INDEXS[key][page]),\n    ];\n  });\n\n  query = query.trim();\n  let keywords = query.split(/[\\s\\-ï¼Œ\\\\/]+/);\n  if (keywords.length !== 1) {\n    keywords = [query, ...keywords];\n  }\n\n  for (const post of data) {\n    let matchesScore = 0;\n    let resultStr = '';\n    let handlePostTitle = '';\n    let handlePostContent = '';\n    const postTitle = post.title && post.title.trim();\n    const postContent = post.body && post.body.trim();\n    const postUrl = post.slug || '';\n\n    if (postTitle) {\n      keywords.forEach(keyword => {\n        // From https://github.com/sindresorhus/escape-string-regexp\n        const regEx = new RegExp(\n          escapeHtml(ignoreDiacriticalMarks(keyword)).replace(\n            /[|\\\\{}()[\\]^$+*?.]/g,\n            '\\\\$&'\n          ),\n          'gi'\n        );\n        let indexTitle = -1;\n        let indexContent = -1;\n        handlePostTitle = postTitle\n          ? escapeHtml(ignoreDiacriticalMarks(postTitle))\n          : postTitle;\n        handlePostContent = postContent\n          ? escapeHtml(ignoreDiacriticalMarks(postContent))\n          : postContent;\n\n        indexTitle = postTitle ? handlePostTitle.search(regEx) : -1;\n        indexContent = postContent ? handlePostContent.search(regEx) : -1;\n\n        if (indexTitle >= 0 || indexContent >= 0) {\n          matchesScore += indexTitle >= 0 ? 3 : indexContent >= 0 ? 2 : 0;\n          if (indexContent < 0) {\n            indexContent = 0;\n          }\n\n          let start = 0;\n          let end = 0;\n\n          start = indexContent < 11 ? 0 : indexContent - 10;\n          end = start === 0 ? 70 : indexContent + keyword.length + 60;\n\n          if (postContent && end > postContent.length) {\n            end = postContent.length;\n          }\n\n          const matchContent =\n            handlePostContent &&\n            '...' +\n              handlePostContent\n                .substring(start, end)\n                .replace(\n                  regEx,\n                  word => /* html */ `<em class=\"search-keyword\">${word}</em>`\n                ) +\n              '...';\n\n          resultStr += matchContent;\n        }\n      });\n\n      if (matchesScore > 0) {\n        const matchingPost = {\n          title: handlePostTitle,\n          content: postContent ? resultStr : '',\n          url: postUrl,\n          score: matchesScore,\n        };\n\n        matchingResults.push(matchingPost);\n      }\n    }\n  }\n\n  return matchingResults.sort((r1, r2) => r2.score - r1.score);\n}\n\nexport function init(config, vm) {\n  const isAuto = config.paths === 'auto';\n  const paths = isAuto ? getAllPaths(vm.router) : config.paths;\n\n  let namespaceSuffix = '';\n\n  // only in auto mode\n  if (paths.length && isAuto && config.pathNamespaces) {\n    const path = paths[0];\n\n    if (Array.isArray(config.pathNamespaces)) {\n      namespaceSuffix =\n        config.pathNamespaces.filter(\n          prefix => path.slice(0, prefix.length) === prefix\n        )[0] || namespaceSuffix;\n    } else if (config.pathNamespaces instanceof RegExp) {\n      const matches = path.match(config.pathNamespaces);\n\n      if (matches) {\n        namespaceSuffix = matches[0];\n      }\n    }\n    const isExistHome = paths.indexOf(namespaceSuffix + '/') === -1;\n    const isExistReadme = paths.indexOf(namespaceSuffix + '/README') === -1;\n    if (isExistHome && isExistReadme) {\n      paths.unshift(namespaceSuffix + '/');\n    }\n  } else if (paths.indexOf('/') === -1 && paths.indexOf('/README') === -1) {\n    paths.unshift('/');\n  }\n\n  const expireKey = resolveExpireKey(config.namespace) + namespaceSuffix;\n  const indexKey = resolveIndexKey(config.namespace) + namespaceSuffix;\n\n  const isExpired = localStorage.getItem(expireKey) < Date.now();\n\n  INDEXS = JSON.parse(localStorage.getItem(indexKey));\n\n  if (isExpired) {\n    INDEXS = {};\n  } else if (!isAuto) {\n    return;\n  }\n\n  const len = paths.length;\n  let count = 0;\n\n  paths.forEach(path => {\n    if (INDEXS[path]) {\n      return count++;\n    }\n\n    Docsify.get(vm.router.getFile(path), false, vm.config.requestHeaders).then(\n      result => {\n        INDEXS[path] = genIndex(path, result, vm.router, config.depth);\n        len === ++count && saveData(config.maxAge, expireKey, indexKey);\n      }\n    );\n  });\n}\n","/* eslint-disable no-unused-vars */\nimport { search } from './search.js';\n\nlet NO_DATA_TEXT = '';\nlet options;\n\nfunction style() {\n  const code = `\n.sidebar {\n  padding-top: 0;\n}\n\n.search {\n  margin-bottom: 20px;\n  padding: 6px;\n  border-bottom: 1px solid #eee;\n}\n\n.search .input-wrap {\n  display: flex;\n  align-items: center;\n}\n\n.search .results-status:not(:empty) {\n  margin-top: 10px;\n  font-size: smaller;\n}\n\n.search .results-panel {\n  display: none;\n}\n\n.search .results-panel.show {\n  display: block;\n}\n\n.search input {\n  outline: none;\n  border: none;\n  width: 100%;\n  padding: 0.6em 7px;\n  font-size: inherit;\n  border: 1px solid transparent;\n}\n\n.search input:focus {\n  box-shadow: 0 0 5px var(--theme-color, #42b983);\n  border: 1px solid var(--theme-color, #42b983);\n}\n\n.search input::-webkit-search-decoration,\n.search input::-webkit-search-cancel-button,\n.search input {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n}\n\n.search input::-ms-clear {\n  display: none;\n  height: 0;\n  width: 0;\n}\n\n.search .clear-button {\n  cursor: pointer;\n  width: 36px;\n  text-align: right;\n  display: none;\n}\n\n.search .clear-button.show {\n  display: block;\n}\n\n.search .clear-button svg {\n  transform: scale(.5);\n}\n\n.search kbd {\n  position: absolute;\n  right: 8px;\n  margin: 0;\n}\n\n.search input:focus ~ kbd,\n.search input:not(:empty) ~ kbd {\n  display: none;\n}\n\n.search h2 {\n  font-size: 17px;\n  margin: 10px 0;\n}\n\n.search a {\n  text-decoration: none;\n  color: inherit;\n}\n\n.search .matching-post {\n  border-bottom: 1px solid #eee;\n}\n\n.search .matching-post:last-child {\n  border-bottom: 0;\n}\n\n.search p {\n  font-size: 14px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.search p.empty {\n  text-align: center;\n}\n\n.app-name.hide, .sidebar-nav.hide {\n  display: none;\n}`;\n\n  Docsify.dom.style(code);\n}\n\nfunction tpl(defaultValue = '') {\n  const html = /* html */ `\n    <div class=\"input-wrap\">\n      <input type=\"search\" value=\"${defaultValue}\" aria-keyshortcuts=\"/ control+k meta+k\" />\n      <div class=\"clear-button\">\n        <svg width=\"26\" height=\"24\">\n          <circle cx=\"12\" cy=\"12\" r=\"11\" fill=\"#ccc\" />\n          <path stroke=\"white\" stroke-width=\"2\" d=\"M8.25,8.25,15.75,15.75\" />\n          <path stroke=\"white\" stroke-width=\"2\"d=\"M8.25,15.75,15.75,8.25\" />\n        </svg>\n      </div>\n      <kbd title=\"Press / to search\">/</kbd>\n    </div>\n    <div class=\"results-status\" aria-live=\"polite\"></div>\n    <div class=\"results-panel\"></div>\n  `;\n  const el = Docsify.dom.create('div', html);\n  const aside = Docsify.dom.find('aside');\n\n  Docsify.dom.toggleClass(el, 'search');\n  el.setAttribute('role', 'search');\n  Docsify.dom.before(aside, el);\n}\n\nfunction doSearch(value) {\n  const $search = Docsify.dom.find('div.search');\n  const $panel = Docsify.dom.find($search, '.results-panel');\n  const $clearBtn = Docsify.dom.find($search, '.clear-button');\n  const $sidebarNav = Docsify.dom.find('.sidebar-nav');\n  const $status = Docsify.dom.find('div.search .results-status');\n  const $appName = Docsify.dom.find('.app-name');\n\n  if (!value) {\n    $panel.classList.remove('show');\n    $clearBtn.classList.remove('show');\n    $panel.innerHTML = '';\n    $status.textContent = '';\n\n    if (options.hideOtherSidebarContent) {\n      $sidebarNav && $sidebarNav.classList.remove('hide');\n      $appName && $appName.classList.remove('hide');\n    }\n\n    return;\n  }\n\n  const matches = search(value);\n\n  let html = '';\n  matches.forEach((post, i) => {\n    html += /* html */ `\n      <div class=\"matching-post\" aria-label=\"search result ${i + 1}\">\n        <a href=\"${post.url}\">\n          <h2>${post.title}</h2>\n          <p>${post.content}</p>\n        </a>\n      </div>\n    `;\n  });\n\n  $panel.classList.add('show');\n  $clearBtn.classList.add('show');\n  $panel.innerHTML = html || /* html */ `<p class=\"empty\">${NO_DATA_TEXT}</p>`;\n  $status.textContent = `Found ${matches.length} results`;\n\n  if (options.hideOtherSidebarContent) {\n    $sidebarNav && $sidebarNav.classList.add('hide');\n    $appName && $appName.classList.add('hide');\n  }\n}\n\nfunction bindEvents() {\n  const $search = Docsify.dom.find('div.search');\n  const $input = Docsify.dom.find($search, 'input');\n  const $inputWrap = Docsify.dom.find($search, '.input-wrap');\n\n  let timeId;\n\n  /**\n    Prevent to Fold sidebar.\n\n    When searching on the mobile end,\n    the sidebar is collapsed when you click the INPUT box,\n    making it impossible to search.\n   */\n  Docsify.dom.on(\n    $search,\n    'click',\n    e =>\n      ['A', 'H2', 'P', 'EM'].indexOf(e.target.tagName) === -1 &&\n      e.stopPropagation()\n  );\n  Docsify.dom.on($input, 'input', e => {\n    clearTimeout(timeId);\n    timeId = setTimeout(_ => doSearch(e.target.value.trim()), 100);\n  });\n  Docsify.dom.on($inputWrap, 'click', e => {\n    // Click input outside\n    if (e.target.tagName !== 'INPUT') {\n      $input.value = '';\n      doSearch();\n    }\n  });\n}\n\nfunction updatePlaceholder(text, path) {\n  const $input = Docsify.dom.getNode('.search input[type=\"search\"]');\n\n  if (!$input) {\n    return;\n  }\n\n  if (typeof text === 'string') {\n    $input.placeholder = text;\n  } else {\n    const match = Object.keys(text).filter(key => path.indexOf(key) > -1)[0];\n    $input.placeholder = text[match];\n  }\n}\n\nfunction updateNoData(text, path) {\n  if (typeof text === 'string') {\n    NO_DATA_TEXT = text;\n  } else {\n    const match = Object.keys(text).filter(key => path.indexOf(key) > -1)[0];\n    NO_DATA_TEXT = text[match];\n  }\n}\n\nfunction updateOptions(opts) {\n  options = opts;\n}\n\nexport function init(opts, vm) {\n  const keywords = vm.router.parse().query.s;\n\n  updateOptions(opts);\n  style();\n  tpl(keywords);\n  bindEvents();\n  keywords && setTimeout(_ => doSearch(keywords), 500);\n}\n\nexport function update(opts, vm) {\n  updateOptions(opts);\n  updatePlaceholder(opts.placeholder, vm.route.path);\n  updateNoData(opts.noData, vm.route.path);\n}\n","/* eslint-disable no-unused-vars */\nimport {\n  init as initComponent,\n  update as updateComponent,\n} from './component.js';\nimport { init as initSearch } from './search.js';\n\nconst CONFIG = {\n  placeholder: 'Type to search',\n  noData: 'No Results!',\n  paths: 'auto',\n  depth: 2,\n  maxAge: 86400000, // 1 day\n  hideOtherSidebarContent: false,\n  namespace: undefined,\n  pathNamespaces: undefined,\n  keyBindings: ['/', 'meta+k', 'ctrl+k'],\n};\n\nconst install = function (hook, vm) {\n  const { util } = Docsify;\n  const opts = vm.config.search || CONFIG;\n\n  if (Array.isArray(opts)) {\n    CONFIG.paths = opts;\n  } else if (typeof opts === 'object') {\n    CONFIG.paths = Array.isArray(opts.paths) ? opts.paths : 'auto';\n    CONFIG.maxAge = util.isPrimitive(opts.maxAge) ? opts.maxAge : CONFIG.maxAge;\n    CONFIG.placeholder = opts.placeholder || CONFIG.placeholder;\n    CONFIG.noData = opts.noData || CONFIG.noData;\n    CONFIG.depth = opts.depth || CONFIG.depth;\n    CONFIG.hideOtherSidebarContent =\n      opts.hideOtherSidebarContent || CONFIG.hideOtherSidebarContent;\n    CONFIG.namespace = opts.namespace || CONFIG.namespace;\n    CONFIG.pathNamespaces = opts.pathNamespaces || CONFIG.pathNamespaces;\n    CONFIG.keyBindings = opts.keyBindings || CONFIG.keyBindings;\n  }\n\n  const isAuto = CONFIG.paths === 'auto';\n\n  hook.init(() => {\n    const { keyBindings } = vm.config;\n\n    // Add key bindings\n    if (keyBindings.constructor === Object) {\n      keyBindings.focusSearch = {\n        bindings: CONFIG.keyBindings,\n        callback(e) {\n          const sidebarElm = document.querySelector('.sidebar');\n          const sidebarToggleElm = document.querySelector('.sidebar-toggle');\n          const searchElm = sidebarElm?.querySelector('input[type=\"search\"]');\n          const isSidebarHidden = sidebarElm?.getBoundingClientRect().x < 0;\n\n          isSidebarHidden && sidebarToggleElm?.click();\n\n          setTimeout(() => searchElm?.focus(), isSidebarHidden ? 250 : 0);\n        },\n      };\n    }\n  });\n  hook.mounted(_ => {\n    initComponent(CONFIG, vm);\n    !isAuto && initSearch(CONFIG, vm);\n  });\n  hook.doneEach(_ => {\n    updateComponent(CONFIG, vm);\n    isAuto && initSearch(CONFIG, vm);\n  });\n};\n\nwindow.$docsify = window.$docsify || {};\n$docsify.plugins = [install, ...($docsify.plugins || [])];\n"],"names":["getAndRemoveDocisfyIgnoreConfig","ignoreAllSubs","ignoreSubHeading","content","arguments","length","undefined","test","replace","INDEXS","LOCAL_STORAGE","EXPIRE_KEY","INDEX_KEY","escapeHtml","string","entityMap","String","s","getTableData","token","text","type","rows","unshift","header","map","columns","r","join","getListData","raw","ignoreDiacriticalMarks","keyword","normalize","init","config","vm","isAuto","paths","router","Docsify","dom","findAll","forEach","node","href","originHref","getAttribute","path","parse","indexOf","util","isAbsolutePath","push","getAllPaths","namespaceSuffix","pathNamespaces","Array","isArray","filter","prefix","slice","RegExp","matches","match","isExistHome","isExistReadme","expireKey","namespace","indexKey","resolveIndexKey","isExpired","localStorage","getItem","Date","now","JSON","len","count","get","getFile","requestHeaders","then","result","depth","tokens","window","marked","lexer","slugify","index","slug","title","tokenIndex","str","m","key","value","trim","getAndRemoveConfig","id","toURL","body","clear","genIndex","maxAge","setItem","stringify","saveData","options","NO_DATA_TEXT","doSearch","$search","find","$panel","$clearBtn","$sidebarNav","$status","$appName","classList","remove","innerHTML","textContent","hideOtherSidebarContent","query","matchingResults","data","Object","keys","page","keywords","split","post","matchesScore","resultStr","handlePostTitle","handlePostContent","postTitle","postContent","postUrl","regEx","indexTitle","indexContent","search","start","end","matchContent","substring","word","matchingPost","url","score","sort","r1","r2","html","i","add","updateOptions","opts","style","el","create","aside","toggleClass","setAttribute","before","tpl","$input","$inputWrap","timeId","on","e","target","tagName","stopPropagation","clearTimeout","setTimeout","_","bindEvents","update","getNode","placeholder","updatePlaceholder","route","updateNoData","noData","CONFIG","keyBindings","$docsify","plugins","hook","isPrimitive","constructor","focusSearch","bindings","callback","sidebarElm","document","querySelector","sidebarToggleElm","searchElm","isSidebarHidden","getBoundingClientRect","x","click","focus","mounted","initComponent","initSearch","doneEach","updateComponent"],"mappings":";;;;;;yBAyDO,SAASA,IAA8C,IACxDC,EAAeC,EAD2BC,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GAsBxD,MApBI,6BAA6BG,KAAKJ,KACpCA,EAAUA,EAAQK,QAAQ,kCAA6B,IACvDN,GAAmB,GAGjB,oBAAoBK,KAAKJ,KAC3BA,EAAUA,EAAQK,QAAQ,mBAAoB,IAC9CN,GAAmB,GAGjB,iCAAiCK,KAAKJ,KACxCA,EAAUA,EAAQK,QAAQ,sCAAiC,IAC3DP,GAAgB,GAGd,wBAAwBM,KAAKJ,KAC/BA,EAAUA,EAAQK,QAAQ,uBAAwB,IAClDP,GAAgB,GAGX,CAAEE,UAASF,gBAAeC,mBACnC,CC1EA,IAAIO,EAAS,CAAA,EAEb,MAAMC,EAAgB,CACpBC,WAAY,yBACZC,UAAW,wBAeb,SAASC,EAAWC,GAClB,MAAMC,EAAY,CAChB,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,SAGP,OAAOC,OAAOF,GAAQN,QAAQ,YAAYS,GAAKF,EAAUE,IAC3D,CAwBA,SAASC,EAAaC,GAOpB,OANKA,EAAMC,MAAuB,UAAfD,EAAME,OACvBF,EAAMG,KAAKC,QAAQJ,EAAMK,QACzBL,EAAMC,KAAOD,EAAMG,KAChBG,KAAIC,GAAWA,EAAQD,KAAIE,GAAKA,EAAEP,OAAMQ,KAAK,SAC7CA,KAAK,UAEHT,EAAMC,IACf,CAEA,SAASS,EAAYV,GAInB,OAHKA,EAAMC,MAAuB,SAAfD,EAAME,OACvBF,EAAMC,KAAOD,EAAMW,KAEdX,EAAMC,IACf,CAgEO,SAASW,EAAuBC,GACrC,OAAIA,GAAWA,EAAQC,UACdD,EAAQC,UAAU,OAAOzB,QAAQ,mBAAoB,IAEvDwB,CACT,CAoGO,SAASE,EAAKC,EAAQC,GAC3B,MAAMC,EAA0B,SAAjBF,EAAOG,MAChBA,EAAQD,EAhNhB,SAAqBE,GACnB,MAAMD,EAAQ,GAkBd,OAhBAE,QAAQC,IACLC,QAAQ,0DACRC,SAAQC,IACP,MAAMC,EAAOD,EAAKC,KACZC,EAAaF,EAAKG,aAAa,QAC/BC,EAAOT,EAAOU,MAAMJ,GAAMG,KAG9BA,IACyB,IAAzBV,EAAMY,QAAQF,KACbR,QAAQW,KAAKC,eAAeN,IAE7BR,EAAMe,KAAKL,EACb,IAGGV,CACT,CA4LyBgB,CAAYlB,EAAGG,QAAUJ,EAAOG,MAEvD,IAAIiB,EAAkB,GAGtB,GAAIjB,EAAMjC,QAAUgC,GAAUF,EAAOqB,eAAgB,CACnD,MAAMR,EAAOV,EAAM,GAEnB,GAAImB,MAAMC,QAAQvB,EAAOqB,gBACvBD,EACEpB,EAAOqB,eAAeG,QACpBC,GAAUZ,EAAKa,MAAM,EAAGD,EAAOvD,UAAYuD,IAC3C,IAAML,OACL,GAAIpB,EAAOqB,0BAA0BM,OAAQ,CAClD,MAAMC,EAAUf,EAAKgB,MAAM7B,EAAOqB,gBAE9BO,IACFR,EAAkBQ,EAAQ,GAE9B,CACA,MAAME,GAAwD,IAA1C3B,EAAMY,QAAQK,EAAkB,KAC9CW,GAAgE,IAAhD5B,EAAMY,QAAQK,EAAkB,WAClDU,GAAeC,GACjB5B,EAAMf,QAAQgC,EAAkB,IAEnC,MAAkC,IAAxBjB,EAAMY,QAAQ,OAA6C,IAA9BZ,EAAMY,QAAQ,YACpDZ,EAAMf,QAAQ,KAGhB,MAAM4C,IArQkBC,EAqQWjC,EAAOiC,WAnQrC,GAAE1D,EAAcC,cAAcyD,IAC/B1D,EAAcC,YAkQqC4C,EArQzD,IAA0Ba,EAsQxB,MAAMC,EAhQR,SAAyBD,GACvB,OAAOA,EACF,GAAE1D,EAAcE,aAAawD,IAC9B1D,EAAcE,SACpB,CA4PmB0D,CAAgBnC,EAAOiC,WAAab,EAE/CgB,EAAYC,aAAaC,QAAQN,GAAaO,KAAKC,MAIzD,GAFAlE,EAASmE,KAAK3B,MAAMuB,aAAaC,QAAQJ,IAErCE,EACF9D,EAAS,CAAA,OACJ,IAAK4B,EACV,OAGF,MAAMwC,EAAMvC,EAAMjC,OAClB,IAAIyE,EAAQ,EAEZxC,EAAMK,SAAQK,IACZ,GAAIvC,EAAOuC,GACT,OAAO8B,IAGTtC,QAAQuC,IAAI3C,EAAGG,OAAOyC,QAAQhC,IAAO,EAAOZ,EAAGD,OAAO8C,gBAAgBC,MACpEC,IACE1E,EAAOuC,GAxNR,SAAkBA,GAAmC,IAA7B7C,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GAAImC,EAAMnC,UAAAC,OAAAD,EAAAA,kBAAAE,EAAE8E,EAAKhF,UAAAC,OAAAD,EAAAA,kBAAAE,EACxD,MAAM+E,EAASC,OAAOC,OAAOC,MAAMrF,GAC7BsF,EAAUH,OAAO9C,QAAQiD,QACzBC,EAAQ,CAAA,EACd,IAAIC,EACAC,EAAQ,GAiDZ,OA/CAP,EAAO1C,SAAQ,CAACxB,EAAO0E,KACrB,GAAmB,YAAf1E,EAAME,MAAsBF,EAAMiE,OAASA,EAAO,CACpD,MAAMU,IAAEA,EAAG3D,OAAEA,GDtEZ,WAAsC,IAAV2D,EAAG1F,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GACvC,MAAM+B,EAAS,CAAA,EAiBf,OAfI2D,IACFA,EAAMA,EACHtF,QAAQ,SAAU,IAClBA,QAAQ,SAAU,IAClBA,QAAQ,oCAAoC,CAACuF,EAAGC,EAAKC,KAC1B,IAAtBD,EAAI9C,QAAQ,MACdf,EAAO6D,GAAQC,GAASA,EAAMzF,QAAQ,UAAW,MAAQ,EAClD,IAGFuF,IAERG,QAGE,CAAEJ,MAAK3D,SAChB,CCmD8BgE,CAAmBhF,EAAMC,MAE3CA,EAAOpB,EAAgCmB,EAAMC,MAAMjB,QAGvDwF,EADExD,EAAOiE,GACF7D,EAAO8D,MAAMrD,EAAM,CAAEoD,GAAIX,EAAQtD,EAAOiE,MAExC7D,EAAO8D,MAAMrD,EAAM,CAAEoD,GAAIX,EAAQ5E,EAAWO,MAGjD0E,IACFF,EAAQ5F,EAAgC8F,GAAK3F,SAG/CuF,EAAMC,GAAQ,CAAEA,OAAMC,MAAOA,EAAOU,KAAM,GAC5C,KAAO,CAUL,GATmB,IAAfT,IACFF,EAAOpD,EAAO8D,MAAMrD,GACpB0C,EAAMC,GAAQ,CACZA,OACAC,MAAgB,MAAT5C,EAAeA,EAAKa,MAAM,GAAK,YACtCyC,KAAMnF,EAAMC,MAAQ,MAInBuE,EACH,OAGGD,EAAMC,GAEAD,EAAMC,GAAMW,MACrBnF,EAAMC,KAAOF,EAAaC,GAC1BA,EAAMC,KAAOS,EAAYV,GAEzBuE,EAAMC,GAAMW,MAAQ,MAAQnF,EAAMC,MAAQ,MAE1CD,EAAMC,KAAOF,EAAaC,GAC1BA,EAAMC,KAAOS,EAAYV,GAEzBuE,EAAMC,GAAMW,KAAOnF,EAAMC,MAAQ,IAVjCsE,EAAMC,GAAQ,CAAEA,OAAMC,MAAO,GAAIU,KAAM,GAY3C,KAEFb,EAAQc,QACDb,CACT,CAiKuBc,CAASxD,EAAMmC,EAAQ/C,EAAGG,OAAQJ,EAAOiD,OACxDP,MAAUC,GA9NlB,SAAkB2B,EAAQtC,EAAWE,GACnCG,aAAakC,QAAQvC,EAAWO,KAAKC,MAAQ8B,GAC7CjC,aAAakC,QAAQrC,EAAUO,KAAK+B,UAAUlG,GAChD,CA2N2BmG,CAASzE,EAAOsE,OAAQtC,EAAWE,EAAS,GAElE,GAEL,CC3SA,IACIwC,EADAC,EAAe,GAqJnB,SAASC,EAASd,GAChB,MAAMe,EAAUxE,QAAQC,IAAIwE,KAAK,cAC3BC,EAAS1E,QAAQC,IAAIwE,KAAKD,EAAS,kBACnCG,EAAY3E,QAAQC,IAAIwE,KAAKD,EAAS,iBACtCI,EAAc5E,QAAQC,IAAIwE,KAAK,gBAC/BI,EAAU7E,QAAQC,IAAIwE,KAAK,8BAC3BK,EAAW9E,QAAQC,IAAIwE,KAAK,aAElC,IAAKhB,EAWH,OAVAiB,EAAOK,UAAUC,OAAO,QACxBL,EAAUI,UAAUC,OAAO,QAC3BN,EAAOO,UAAY,GACnBJ,EAAQK,YAAc,QAElBb,EAAQc,0BACVP,GAAeA,EAAYG,UAAUC,OAAO,QAC5CF,GAAYA,EAASC,UAAUC,OAAO,UAM1C,MAAMzD,EDzBD,SAAgB6D,GACrB,MAAMC,EAAkB,GACxB,IAAIC,EAAO,GACXC,OAAOC,KAAKvH,GAAQkC,SAAQqD,IAC1B8B,EAAO,IACFA,KACAC,OAAOC,KAAKvH,EAAOuF,IAAMvE,KAAIwG,GAAQxH,EAAOuF,GAAKiC,KACrD,IAIH,IAAIC,GADJN,EAAQA,EAAM1B,QACOiC,MAAM,eACH,IAApBD,EAAS7H,SACX6H,EAAW,CAACN,KAAUM,IAGxB,IAAK,MAAME,KAAQN,EAAM,CACvB,IAAIO,EAAe,EACfC,EAAY,GACZC,EAAkB,GAClBC,EAAoB,GACxB,MAAMC,EAAYL,EAAKxC,OAASwC,EAAKxC,MAAMM,OACrCwC,EAAcN,EAAK9B,MAAQ8B,EAAK9B,KAAKJ,OACrCyC,EAAUP,EAAKzC,MAAQ,GAE7B,GAAI8C,IACFP,EAASvF,SAAQX,IAEf,MAAM4G,EAAQ,IAAI9E,OAChBjD,EAAWkB,EAAuBC,IAAUxB,QAC1C,sBACA,QAEF,MAEF,IAAIqI,GAAc,EACdC,GAAgB,EAWpB,GAVAP,EAAkBE,EACd5H,EAAWkB,EAAuB0G,IAClCA,EACJD,EAAoBE,EAChB7H,EAAWkB,EAAuB2G,IAClCA,EAEJG,EAAaJ,EAAYF,EAAgBQ,OAAOH,IAAU,EAC1DE,EAAeJ,EAAcF,EAAkBO,OAAOH,IAAU,EAE5DC,GAAc,GAAKC,GAAgB,EAAG,CACxCT,GAAgBQ,GAAc,EAAI,EAAIC,GAAgB,EAAI,EAAI,EAC1DA,EAAe,IACjBA,EAAe,GAGjB,IAAIE,EAAQ,EACRC,EAAM,EAEVD,EAAQF,EAAe,GAAK,EAAIA,EAAe,GAC/CG,EAAgB,IAAVD,EAAc,GAAKF,EAAe9G,EAAQ3B,OAAS,GAErDqI,GAAeO,EAAMP,EAAYrI,SACnC4I,EAAMP,EAAYrI,QAGpB,MAAM6I,EACJV,GACA,MACEA,EACGW,UAAUH,EAAOC,GACjBzI,QACCoI,GACAQ,GAAoB,8BAA6BA,WAErD,MAEJd,GAAaY,CACf,KAGEb,EAAe,GAAG,CACpB,MAAMgB,EAAe,CACnBzD,MAAO2C,EACPpI,QAASuI,EAAcJ,EAAY,GACnCgB,IAAKX,EACLY,MAAOlB,GAGTR,EAAgBxE,KAAKgG,EACvB,CAEJ,CAEA,OAAOxB,EAAgB2B,MAAK,CAACC,EAAIC,IAAOA,EAAGH,MAAQE,EAAGF,OACxD,CCnEkBR,CAAO9C,GAEvB,IAAI0D,EAAO,GACX5F,EAAQpB,SAAQ,CAACyF,EAAMwB,KACrBD,GAAoB,gEACqCC,EAAI,yBAC9CxB,EAAKkB,wBACRlB,EAAKxC,4BACNwC,EAAKjI,+CAGf,IAGH+G,EAAOK,UAAUsC,IAAI,QACrB1C,EAAUI,UAAUsC,IAAI,QACxB3C,EAAOO,UAAYkC,GAAoB,oBAAmB7C,QAC1DO,EAAQK,YAAe,SAAQ3D,EAAQ1D,iBAEnCwG,EAAQc,0BACVP,GAAeA,EAAYG,UAAUsC,IAAI,QACzCvC,GAAYA,EAASC,UAAUsC,IAAI,QAEvC,CA4DA,SAASC,EAAcC,GACrBlD,EAAUkD,CACZ,CAEO,SAAS7H,EAAK6H,EAAM3H,GACzB,MAAM8F,EAAW9F,EAAGG,OAAOU,QAAQ2E,MAAM3G,EAEzC6I,EAAcC,GA3IdvH,QAAQC,IAAIuH,MAtHE,mzDAyHhB,WACE,MAAML,EAAmB,qEADFvJ,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,4gBAgBpB6J,EAAKzH,QAAQC,IAAIyH,OAAO,MAAOP,GAC/BQ,EAAQ3H,QAAQC,IAAIwE,KAAK,SAE/BzE,QAAQC,IAAI2H,YAAYH,EAAI,UAC5BA,EAAGI,aAAa,OAAQ,UACxB7H,QAAQC,IAAI6H,OAAOH,EAAOF,EAC5B,CAoHEM,CAAIrC,GAnEN,WACE,MAAMlB,EAAUxE,QAAQC,IAAIwE,KAAK,cAC3BuD,EAAShI,QAAQC,IAAIwE,KAAKD,EAAS,SACnCyD,EAAajI,QAAQC,IAAIwE,KAAKD,EAAS,eAE7C,IAAI0D,EASJlI,QAAQC,IAAIkI,GACV3D,EACA,SACA4D,IACwD,IAAtD,CAAC,IAAK,KAAM,IAAK,MAAM1H,QAAQ0H,EAAEC,OAAOC,UACxCF,EAAEG,oBAENvI,QAAQC,IAAIkI,GAAGH,EAAQ,SAASI,IAC9BI,aAAaN,GACbA,EAASO,YAAWC,GAAKnE,EAAS6D,EAAEC,OAAO5E,MAAMC,SAAS,IAAI,IAEhE1D,QAAQC,IAAIkI,GAAGF,EAAY,SAASG,IAET,UAArBA,EAAEC,OAAOC,UACXN,EAAOvE,MAAQ,GACfc,IACF,GAEJ,CAoCEoE,GACAjD,GAAY+C,YAAWC,GAAKnE,EAASmB,IAAW,IAClD,CAEO,SAASkD,EAAOrB,EAAM3H,GAC3B0H,EAAcC,GAvChB,SAA2B3I,EAAM4B,GAC/B,MAAMwH,EAAShI,QAAQC,IAAI4I,QAAQ,gCAEnC,GAAKb,EAIL,GAAoB,iBAATpJ,EACToJ,EAAOc,YAAclK,MAChB,CACL,MAAM4C,EAAQ+D,OAAOC,KAAK5G,GAAMuC,QAAOqC,GAAOhD,EAAKE,QAAQ8C,IAAQ,IAAG,GACtEwE,EAAOc,YAAclK,EAAK4C,EAC5B,CACF,CA2BEuH,CAAkBxB,EAAKuB,YAAalJ,EAAGoJ,MAAMxI,MAzB/C,SAAsB5B,EAAM4B,GAC1B,GAAoB,iBAAT5B,EACT0F,EAAe1F,MACV,CACL,MAAM4C,EAAQ+D,OAAOC,KAAK5G,GAAMuC,QAAOqC,GAAOhD,EAAKE,QAAQ8C,IAAQ,IAAG,GACtEc,EAAe1F,EAAK4C,EACtB,CACF,CAmBEyH,CAAa1B,EAAK2B,OAAQtJ,EAAGoJ,MAAMxI,KACrC,CC5QA,MAAM2I,EAAS,CACbL,YAAa,iBACbI,OAAQ,cACRpJ,MAAO,OACP8C,MAAO,EACPqB,OAAQ,MACRkB,yBAAyB,EACzBvD,eAAW9D,EACXkD,oBAAgBlD,EAChBsL,YAAa,CAAC,IAAK,SAAU,WAsD/BtG,OAAOuG,SAAWvG,OAAOuG,UAAY,GACrCA,SAASC,QAAU,CApDH,SAAUC,EAAM3J,GAC9B,MAAMe,KAAEA,GAASX,QACXuH,EAAO3H,EAAGD,OAAO4G,QAAU4C,EAE7BlI,MAAMC,QAAQqG,GAChB4B,EAAOrJ,MAAQyH,EACU,iBAATA,IAChB4B,EAAOrJ,MAAQmB,MAAMC,QAAQqG,EAAKzH,OAASyH,EAAKzH,MAAQ,OACxDqJ,EAAOlF,OAAStD,EAAK6I,YAAYjC,EAAKtD,QAAUsD,EAAKtD,OAASkF,EAAOlF,OACrEkF,EAAOL,YAAcvB,EAAKuB,aAAeK,EAAOL,YAChDK,EAAOD,OAAS3B,EAAK2B,QAAUC,EAAOD,OACtCC,EAAOvG,MAAQ2E,EAAK3E,OAASuG,EAAOvG,MACpCuG,EAAOhE,wBACLoC,EAAKpC,yBAA2BgE,EAAOhE,wBACzCgE,EAAOvH,UAAY2F,EAAK3F,WAAauH,EAAOvH,UAC5CuH,EAAOnI,eAAiBuG,EAAKvG,gBAAkBmI,EAAOnI,eACtDmI,EAAOC,YAAc7B,EAAK6B,aAAeD,EAAOC,aAGlD,MAAMvJ,EAA0B,SAAjBsJ,EAAOrJ,MAEtByJ,EAAK7J,MAAK,KACR,MAAM0J,YAAEA,GAAgBxJ,EAAGD,OAGvByJ,EAAYK,cAAgBlE,SAC9B6D,EAAYM,YAAc,CACxBC,SAAUR,EAAOC,YACjBQ,QAAAA,CAASxB,GACP,MAAMyB,EAAaC,SAASC,cAAc,YACpCC,EAAmBF,SAASC,cAAc,mBAC1CE,EAAYJ,GAAYE,cAAc,wBACtCG,EAAkBL,GAAYM,wBAAwBC,EAAI,EAEhEF,GAAmBF,GAAkBK,QAErC5B,YAAW,IAAMwB,GAAWK,SAASJ,EAAkB,IAAM,EAC/D,GAEJ,IAEFX,EAAKgB,SAAQ7B,IACX8B,EAAcrB,EAAQvJ,IACrBC,GAAU4K,EAAWtB,EAAQvJ,EAAG,IAEnC2J,EAAKmB,UAAShC,IACZiC,EAAgBxB,EAAQvJ,GACxBC,GAAU4K,EAAWtB,EAAQvJ,EAAG,GAEpC,KAGiCyJ,SAASC,SAAW"}